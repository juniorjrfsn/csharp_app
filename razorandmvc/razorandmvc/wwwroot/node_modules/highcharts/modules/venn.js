/*
 Highcharts JS v10.2.1 (2022-09-19)

 (c) 2017-2021 Highsoft AS
 Authors: Jon Arild Nygard

 License: www.highcharts.com/license
*/
(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/venn",["highcharts"],function(p){a(p);a.Highcharts=p;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function p(a,g,c,v){a.hasOwnProperty(g)||(a[g]=v.apply(null,c),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:g,module:a[g]}})))}a=a?a._modules:{};p(a,"Core/Geometry/GeometryUtilities.js",
[],function(){var a;(function(a){a.getCenterOfPoints=function(a){var c=a.reduce(function(a,c){a.x+=c.x;a.y+=c.y;return a},{x:0,y:0});return{x:c.x/a.length,y:c.y/a.length}};a.getDistanceBetweenPoints=function(a,g){return Math.sqrt(Math.pow(g.x-a.x,2)+Math.pow(g.y-a.y,2))};a.getAngleBetweenPoints=function(a,g){return Math.atan2(g.x-a.x,g.y-a.y)}})(a||(a={}));return a});p(a,"Core/Geometry/CircleUtilities.js",[a["Core/Geometry/GeometryUtilities.js"]],function(a){var g=a.getAngleBetweenPoints,c=a.getCenterOfPoints,
v=a.getDistanceBetweenPoints,m;(function(a){function l(a,f){f=Math.pow(10,f);return Math.round(a*f)/f}function n(a){if(0>=a)throw Error("radius of circle must be a positive number.");return Math.PI*a*a}function h(a,f){return a*a*Math.acos(1-f/a)-(a-f)*Math.sqrt(f*(2*a-f))}function m(a,f){var c=v(a,f),h=a.r,g=f.r,t=[];if(c<h+g&&c>Math.abs(h-g)){h*=h;var q=(h-g*g+c*c)/(2*c);g=Math.sqrt(h-q*q);h=a.x;t=f.x;a=a.y;var m=f.y;f=h+q*(t-h)/c;q=a+q*(m-a)/c;a=g/c*-(m-a);c=g/c*-(t-h);t=[{x:l(f+a,14),y:l(q-c,14)},
{x:l(f-a,14),y:l(q+c,14)}]}return t}function w(a){return a.reduce(function(a,c,h,g){g=g.slice(h+1).reduce(function(a,f,g,t){var l=[h,g+h+1];return a.concat(m(c,f).map(function(a){a.indexes=l;return a}))},[]);return a.concat(g)},[])}function r(a,f){return v(a,f)<=f.r+1e-10}function p(a,f){return!f.some(function(f){return!r(a,f)})}function A(a){return w(a).filter(function(f){return p(f,a)})}a.round=l;a.getAreaOfCircle=n;a.getCircularSegmentArea=h;a.getOverlapBetweenCircles=function(a,f,c){var g=0;c<
a+f&&(c<=Math.abs(f-a)?g=n(a<f?a:f):(g=(a*a-f*f+c*c)/(2*c),c-=g,g=h(a,a-g)+h(f,f-c)),g=l(g,14));return g};a.getCircleCircleIntersection=m;a.getCirclesIntersectionPoints=w;a.isCircle1CompletelyOverlappingCircle2=function(a,c){return v(a,c)+c.r<a.r+1e-10};a.isPointInsideCircle=r;a.isPointInsideAllCircles=p;a.isPointOutsideAllCircles=function(a,c){return!c.some(function(c){return r(a,c)})};a.getCirclesIntersectionPolygon=A;a.getAreaOfIntersectionBetweenCircles=function(a){var f=A(a);if(1<f.length){var h=
c(f);f=f.map(function(a){a.angle=g(h,a);return a}).sort(function(a,c){return c.angle-a.angle});var l=f[f.length-1];f=f.reduce(function(h,f){var l=h.startPoint,m=c([l,f]),n=f.indexes.filter(function(a){return-1<l.indexes.indexOf(a)}).reduce(function(d,b){b=a[b];var e=g(b,f),k=g(b,l);e=k-(k-e+(k<e?2*Math.PI:0))/2;e=v(m,{x:b.x+b.r*Math.sin(e),y:b.y+b.r*Math.cos(e)});b=b.r;e>2*b&&(e=2*b);if(!d||d.width>e)d={r:b,largeArc:e>b?1:0,width:e,x:f.x,y:f.y};return d},null);if(n){var z=n.r;h.arcs.push(["A",z,z,
0,n.largeArc,1,n.x,n.y]);h.startPoint=f}return h},{startPoint:l,arcs:[]}).arcs;if(0!==f.length&&1!==f.length){f.unshift(["M",l.x,l.y]);var m={center:h,d:f}}}return m}})(m||(m={}));return m});p(a,"Series/DrawPointUtilities.js",[a["Core/Utilities.js"]],function(a){return{draw:function(a,c){var g=c.animatableAttribs,m=c.onComplete,w=c.css,l=c.renderer,n=a.series&&a.series.chart.hasRendered?void 0:a.series&&a.series.options.animation,h=a.graphic;c.attribs=c.attribs||{};c.attribs["class"]=a.getClassName();
if(a.shouldDraw())h||(a.graphic=h="text"===c.shapeType?l.text():l[c.shapeType](c.shapeArgs||{}),h.add(c.group)),w&&h.css(w),h.attr(c.attribs).animate(g,c.isNew?!1:n,m);else if(h){var r=function(){a.graphic=h=h&&h.destroy();"function"===typeof m&&m()};Object.keys(g).length?h.animate(g,void 0,function(){return r()}):r()}}}});p(a,"Series/Venn/VennPoint.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,g){var c=this&&this.__extends||function(){var a=function(c,g){a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var h in c)c.hasOwnProperty(h)&&(a[h]=c[h])};return a(c,g)};return function(c,g){function l(){this.constructor=c}a(c,g);c.prototype=null===g?Object.create(g):(l.prototype=g.prototype,new l)}}(),r=g.isNumber;return function(a){function g(){var c=null!==a&&a.apply(this,arguments)||this;c.options=void 0;c.series=void 0;return c}c(g,a);g.prototype.isValid=function(){return r(this.value)};g.prototype.shouldDraw=function(){return!!this.shapeArgs};
return g}(a.seriesTypes.scatter.prototype.pointClass)});p(a,"Series/Venn/VennUtils.js",[a["Core/Geometry/CircleUtilities.js"],a["Core/Geometry/GeometryUtilities.js"],a["Core/Utilities.js"]],function(a,g,c){function p(a){var d=a.filter(function(a){return 2===a.sets.length}).reduce(function(a,e){e.sets.forEach(function(b,d,c){E(a[b])||(a[b]={overlapping:{},totalOverlap:0});a[b].totalOverlap+=e.value;a[b].overlapping[c[1-d]]=e.value});return a},{});a.filter(h).forEach(function(a){D(a,d[a.sets[0]])});
return a}function m(a,d,b,e,k){var c=a(d),u=a(b);k=k||100;e=e||1e-10;var z=b-d,f=1;if(d>=b)throw Error("a must be smaller than b.");if(0<c*u)throw Error("f(a) and f(b) must have opposite signs.");if(0===c)var g=d;else if(0===u)g=b;else for(;f++<=k&&0!==h&&z>e;){z=(b-d)/2;g=d+z;var h=a(g);0<c*h?d=g:b=g}return g}function r(a){a=a.slice(0,-1);for(var d=a.length,b=[],e=function(a,b){a.sum+=b[a.i];return a},k=0;k<d;k++)b[k]=a.reduce(e,{sum:0,i:k}).sum/d;return b}function l(a,d,b){var e=a+d;return 0>=b?
e:I(a<d?a:d)<=b?0:m(function(e){e=t(a,d,e);return b-e},0,e)}function n(a){var d=0;2===a.length&&(d=a[0],a=a[1],d=t(d.r,a.r,y(d,a)));return d}function h(a){return q(a.sets)&&1===a.sets.length}function K(a){var d={};return E(a)&&x(a.value)&&-1<a.value&&q(a.sets)&&0<a.sets.length&&!a.sets.some(function(a){var b=!1;!d[a]&&B(a)?d[a]=!0:b=!0;return b})}function L(a,d){return d.reduce(function(b,e){var k=0;1<e.sets.length&&(k=e.value,e=n(e.sets.map(function(b){return a[b]})),e=k-e,k=Math.round(e*e*1E11)/
1E11);return b+k},0)}function F(a,d){return d.totalOverlap-a.totalOverlap}var I=a.getAreaOfCircle,A=a.getCircleCircleIntersection,t=a.getOverlapBetweenCircles,f=a.isPointInsideAllCircles,G=a.isPointInsideCircle,H=a.isPointOutsideAllCircles,y=g.getDistanceBetweenPoints,D=c.extend,q=c.isArray,x=c.isNumber,E=c.isObject,B=c.isString;return{geometry:g,geometryCircles:a,addOverlapToSets:p,getCentroid:r,getDistanceBetweenCirclesByOverlap:l,getLabelWidth:function(a,d,b){var e=d.reduce(function(a,b){return Math.min(b.r,
a)},Infinity),k=b.filter(function(b){return!G(a,b)});b=function(b,e){return m(function(c){var u={x:a.x+e*c,y:a.y};u=f(u,d)&&H(u,k);return-(b-c)+(u?0:Number.MAX_VALUE)},0,b)};return 2*Math.min(b(e,-1),b(e,1))},getMarginFromCircles:function(a,d,b){d=d.reduce(function(b,k){k=k.r-y(a,k);return k<=b?k:b},Number.MAX_VALUE);return d=b.reduce(function(b,k){k=y(a,k)-k.r;return k<=b?k:b},d)},isSet:h,layoutGreedyVenn:function(a){var d=[],b={};a.filter(function(a){return 1===a.sets.length}).forEach(function(a){b[a.sets[0]]=
a.circle={x:Number.MAX_VALUE,y:Number.MAX_VALUE,r:Math.sqrt(a.value/Math.PI)}});var e=function(a,b){var e=a.circle;e.x=b.x;e.y=b.y;d.push(a)};p(a);var k=a.filter(h).sort(F);e(k.shift(),{x:0,y:0});var c=a.filter(function(a){return 2===a.sets.length});k.forEach(function(a){var k=a.circle,g=k.r,u=a.overlapping,f=d.reduce(function(a,e,f){var h=e.circle,C=l(g,h.r,u[e.sets[0]]),J=[{x:h.x+C,y:h.y},{x:h.x-C,y:h.y},{x:h.x,y:h.y+C},{x:h.x,y:h.y-C}];d.slice(f+1).forEach(function(a){var b=a.circle;a=l(g,b.r,
u[a.sets[0]]);J=J.concat(A({x:h.x,y:h.y,r:C},{x:b.x,y:b.y,r:a}))});J.forEach(function(e){k.x=e.x;k.y=e.y;var d=L(b,c);d<a.loss&&(a.loss=d,a.coordinates=e)});return a},{loss:Number.MAX_VALUE,coordinates:void 0});e(a,f.coordinates)});return b},loss:L,nelderMead:function(a,d){var b=function(a,b){return a.fx-b.fx},e=function(a,b,e,k){return b.map(function(b,d){return a*b+e*k[d]})},k=function(b,e){e.fx=a(e);b[b.length-1]=e;return b},c=function(b){var k=b[0];return b.map(function(b){b=e(.5,k,.5,b);b.fx=
a(b);return b})},h=function(b,k,d,c){b=e(d,b,c,k);b.fx=a(b);return b};d=function(b){var e=b.length,k=Array(e+1);k[0]=b;k[0].fx=a(b);for(var d=0;d<e;++d){var c=b.slice();c[d]=c[d]?1.05*c[d]:.001;c.fx=a(c);k[d+1]=c}return k}(d);for(var g=0;100>g;g++){d.sort(b);var f=d[d.length-1],l=r(d),m=h(l,f,2,-1);if(m.fx<d[0].fx)f=h(l,f,3,-2),d=k(d,f.fx<m.fx?f:m);else if(m.fx>=d[d.length-2].fx){var n=void 0;m.fx>f.fx?(n=h(l,f,.5,.5),d=n.fx<f.fx?k(d,n):c(d)):(n=h(l,f,1.5,-.5),d=n.fx<m.fx?k(d,n):c(d))}else d=k(d,
m)}return d[0]},processVennData:function(a){a=q(a)?a:[];var d=a.reduce(function(a,b){K(b)&&h(b)&&0<b.value&&-1===a.indexOf(b.sets[0])&&a.push(b.sets[0]);return a},[]).sort(),b=a.reduce(function(a,b){K(b)&&!b.sets.some(function(a){return-1===d.indexOf(a)})&&(a[b.sets.sort().join()]=b);return a},{});d.reduce(function(a,b,d,c){c.slice(d+1).forEach(function(e){a.push(b+","+e)});return a},[]).forEach(function(a){if(!b[a]){var e={sets:a.split(","),value:0};b[a]=e}});return Object.keys(b).map(function(a){return b[a]})},
sortByTotalOverlap:F}});p(a,"Series/Venn/VennSeries.js",[a["Core/Animation/AnimationUtilities.js"],a["Core/Color/Color.js"],a["Core/Geometry/CircleUtilities.js"],a["Series/DrawPointUtilities.js"],a["Core/Geometry/GeometryUtilities.js"],a["Core/Series/SeriesRegistry.js"],a["Series/Venn/VennPoint.js"],a["Series/Venn/VennUtils.js"],a["Core/Utilities.js"]],function(a,g,c,p,m,w,l,n,h){var r=this&&this.__extends||function(){var a=function(d,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,
b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return a(d,b)};return function(d,b){function e(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}(),v=a.animObject,F=g.parse,I=c.getAreaOfIntersectionBetweenCircles,A=c.getCirclesIntersectionPolygon,t=c.isCircle1CompletelyOverlappingCircle2,f=c.isPointInsideAllCircles,G=c.isPointOutsideAllCircles,H=m.getCenterOfPoints,y=w.seriesTypes.scatter;a=h.addEvent;var D=h.extend,
q=h.isArray,x=h.isNumber,E=h.isObject,B=h.merge;h=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.mapOfIdToRelation=void 0;b.options=void 0;b.points=void 0;return b}r(d,a);d.getLabelPosition=function(a,d){var b=a.reduce(function(b,e){var c=e.r/2;return[{x:e.x,y:e.y},{x:e.x+c,y:e.y},{x:e.x-c,y:e.y},{x:e.x,y:e.y+c},{x:e.x,y:e.y-c}].reduce(function(b,e){var c=n.getMarginFromCircles(e,a,d);b.margin<c&&(b.point=e,b.margin=c);return b},b)},{point:void 0,margin:-Number.MAX_VALUE}).point;
b=n.nelderMead(function(b){return-n.getMarginFromCircles({x:b[0],y:b[1]},a,d)},[b.x,b.y]);b={x:b[0],y:b[1]};f(b,a)&&G(b,d)||(b=1<a.length?H(A(a)):{x:a[0].x,y:a[0].y});return b};d.getLabelValues=function(a,e){var b=a.sets,c=e.reduce(function(a,c){var e=-1<b.indexOf(c.sets[0]);a[e?"internal":"external"].push(c.circle);return a},{internal:[],external:[]});c.external=c.external.filter(function(a){return c.internal.some(function(b){return!t(a,b)})});a=d.getLabelPosition(c.internal,c.external);e=n.getLabelWidth(a,
c.internal,c.external);return{position:a,width:e}};d.layout=function(a){var b={},c={};if(0<a.length){var h=n.layoutGreedyVenn(a),f=a.filter(n.isSet);a.forEach(function(a){var e=a.sets,k=e.join();if(e=n.isSet(a)?h[k]:I(e.map(function(a){return h[a]})))b[k]=e,c[k]=d.getLabelValues(a,f)})}return{mapOfIdToShape:b,mapOfIdToLabelValues:c}};d.getScale=function(a,c,d){var b=d.bottom-d.top,e=d.right-d.left;b=Math.min(0<e?1/e*a:1,0<b?1/b*c:1);return{scale:b,centerX:a/2-(d.right+d.left)/2*b,centerY:c/2-(d.top+
d.bottom)/2*b}};d.updateFieldBoundaries=function(a,c){var b=c.x-c.r,d=c.x+c.r,e=c.y+c.r;c=c.y-c.r;if(!x(a.left)||a.left>b)a.left=b;if(!x(a.right)||a.right<d)a.right=d;if(!x(a.top)||a.top>c)a.top=c;if(!x(a.bottom)||a.bottom<e)a.bottom=e;return a};d.prototype.animate=function(a){if(!a){var b=v(this.options.animation);this.points.forEach(function(a){var c=a.shapeArgs;if(a.graphic&&c){var d={},e={};c.d?d.opacity=.001:(d.r=0,e.r=c.r);a.graphic.attr(d).animate(e,b);c.d&&setTimeout(function(){a&&a.graphic&&
a.graphic.animate({opacity:1})},b.duration)}},this)}};d.prototype.drawPoints=function(){var a=this,c=a.chart,d=a.group,h=c.renderer;(a.points||[]).forEach(function(b){var e={zIndex:q(b.sets)?b.sets.length:0},f=b.shapeArgs;c.styledMode||D(e,a.pointAttribs(b,b.state));p.draw(b,{isNew:!b.graphic,animatableAttribs:f,attribs:e,group:d,renderer:h,shapeType:f&&f.d?"path":"circle"})})};d.prototype.init=function(){y.prototype.init.apply(this,arguments);delete this.opacity};d.prototype.pointAttribs=function(a,
c){var b=this.options||{};a=B(b,{color:a&&a.color},a&&a.options||{},c&&b.states[c]||{});return{fill:F(a.color).brighten(a.brightness).get(),opacity:a.opacity,stroke:a.borderColor,"stroke-width":a.borderWidth,dashstyle:a.borderDashStyle}};d.prototype.translate=function(){var a=this.chart;this.processedXData=this.xData;this.generatePoints();var c=n.processVennData(this.options.data);c=d.layout(c);var f=c.mapOfIdToShape,h=c.mapOfIdToLabelValues;c=Object.keys(f).filter(function(a){return(a=f[a])&&x(a.r)}).reduce(function(a,
b){return d.updateFieldBoundaries(a,f[b])},{top:0,bottom:0,left:0,right:0});a=d.getScale(a.plotWidth,a.plotHeight,c);var g=a.scale,l=a.centerX,m=a.centerY;this.points.forEach(function(a){var b=q(a.sets)?a.sets:[],c=b.join(),d=f[c],e=h[c]||{};c=e.width;e=e.position;var k=a.options&&a.options.dataLabels;if(d){if(d.r)var n={x:l+d.x*g,y:m+d.y*g,r:d.r*g};else d.d&&(d=d.d,d.forEach(function(a){"M"===a[0]?(a[1]=l+a[1]*g,a[2]=m+a[2]*g):"A"===a[0]&&(a[1]*=g,a[2]*=g,a[6]=l+a[6]*g,a[7]=m+a[7]*g)}),n={d:d});
e?(e.x=l+e.x*g,e.y=m+e.y*g):e={};x(c)&&(c=Math.round(c*g))}a.shapeArgs=n;e&&n&&(a.plotX=e.x,a.plotY=e.y);c&&n&&(a.dlOptions=B(!0,{style:{width:c}},E(k,!0)?k:void 0));a.name=a.options.name||b.join("\u2229")})};d.defaultOptions=B(y.defaultOptions,{borderColor:"#cccccc",borderDashStyle:"solid",borderWidth:1,brighten:0,clip:!1,colorByPoint:!0,dataLabels:{enabled:!0,verticalAlign:"middle",formatter:function(){return this.point.name}},inactiveOtherPoints:!0,marker:!1,opacity:.75,showInLegend:!1,states:{hover:{opacity:1,
borderColor:"#333333"},select:{color:"#cccccc",borderColor:"#000000",animation:!1},inactive:{opacity:.075}},tooltip:{pointFormat:"{point.name}: {point.value}"}});return d}(y);D(h.prototype,{axisTypes:[],directTouch:!0,isCartesian:!1,pointArrayMap:["value"],pointClass:l,utils:n});w.registerSeriesType("venn",h);"";a(h,"afterSetOptions",function(a){var c=a.options.states;this.is("venn")&&Object.keys(c).forEach(function(a){c[a].halo=!1})});return h});p(a,"masters/modules/venn.src.js",[],function(){})});
//# sourceMappingURL=venn.js.map